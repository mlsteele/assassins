<template name="main">
  <h1>Slug Assassins</h1>
  {{> loginButtons}}
  {{> yield}}
</template>

<template name="home">
  {{#if currentUser}}
    {{#if joinedGame}}
      {{#if gameRunning}}
        {{> dashboard}}
      {{else}}
        {{> pregame}}
      {{/if}}
    {{else}}
      {{> start}}
    {{/if}}
  {{else}}
    {{> start}}
  {{/if}}
</template>

<template name="start">
  {{#if currentUser}}
    <a href="{{pathFor route='create'}}">Create a new game</a>
    <a href="{{pathFor route='join'}}">Join a game</a>
    <a href="{{pathFor route= 'init'}}">Start a game</a>
  {{/if}}
</template>

<template name="create">
  {{#if currentUser}}
    <h2>Create a Game</h2>
    <form>
      <label>Your name: <input type="text" value="{{displayName}}" name="username"></label>
      <label>Game name: <input type="text" placeholder="fall15" name="name"></label>
      <label>Mailing list to invite: <input type="email" placeholder="salt@example.com" name="list"></label>
      <input type="submit" name="create-game" value="Go!">
    </form>
    {{#if errorMessage}}
      <span>{{errorMessage}}</span>
    {{/if}}
  {{/if}}
</template>

<template name="join">
  {{#if currentUser}}
    <h2>Join a game</h2>
    <form>
        <label>Your name:
          <input type="text" value="{{displayName}}" name="username"></label><br>
      <label>Game name: <input type="text" name="name"></label>
      <input type="submit" name="join-game" value="join">
    </form>
    {{#if badGameId}}
      <span>No game named "{{badGameId}}"</span>
    {{/if}}
  {{/if}}
</template>

<template name="dashboard">
  {{#if currentUser}}
    <h2>Dashboard</h2>
    <b>Your Target:</b> {{target}} <br>
    <button name="die" class="die">I've been killed!</button><br>
    Players:
    {{> playerslist}} 
    <br>
    <button name="guess" class="guess"> Guess </button>
  {{/if}}
</template>

<template name="pregame">
  {{#if currentUser}}
    <h2>Game: {{name}} has not started</h2>
    Players signed up so far:
    {{> playerslist}}
    {{#if manager}}
      <button class="startButton" name="start-game">Start the game</button>
      <button name="cancel-game">Cancel the game</button>
    {{/if}}
  {{/if}}
</template>

<template name="playerslist">
  {{#if currentUser}}
    <ul>
      {{#each players}}
        <li>{{name}}
          {{#if manager}}
            (Game Manager)
          {{/if}}
        </li>
      {{/each}}
    </ul>
  {{/if}}
</template>

<template name="guess">
  {{#if currentUser}}
    <br> <br>
    Construct the circle!

  {{/if}}
</template>
